var cy;

$(function(){ // on dom ready

  cy = cytoscape({
    container: document.getElementById('cy'),

    style: [{"selector":"core","style":{"selection-box-color":"#AAD8FF","selection-box-border-color":"#8BB0D0","selection-box-opacity":"0.5"}},{"selector":"node","style":{"width":"mapData(score, 0, 0.006769776522008331, 20, 60)","height":"mapData(score, 0, 0.006769776522008331, 20, 60)","content":"data(name)","font-size":"12px","text-valign":"center","text-halign":"center","background-color":"#555","text-outline-color":"#555","text-outline-width":"2px","color":"#fff","overlay-padding":"6px","z-index":"10"}},{"selector":"node[?attr]","style":{"shape":"rectangle","background-color":"#aaa","text-outline-color":"#aaa","width":"16px","height":"16px","font-size":"6px","z-index":"1"}},{"selector":"node[?query]","style":{"background-clip":"none","background-fit":"contain"}},{"selector":"node:selected","style":{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C","text-outline-color":"#77828C"}},{"selector":"edge","style":{"curve-style":"haystack","haystack-radius":"0.5","opacity":"0.4","line-color":"#bbb","width":"mapData(weight, 0, 1, 1, 8)","overlay-padding":"3px"}},{"selector":"node.unhighlighted","style":{"opacity":"0.2"}},{"selector":"edge.unhighlighted","style":{"opacity":"0.05"}},{"selector":".highlighted","style":{"z-index":"999999"}},{"selector":"node.highlighted","style":{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#394855","text-outline-color":"#394855","shadow-blur":"12px","shadow-color":"#000","shadow-opacity":"0.8","shadow-offset-x":"0px","shadow-offset-y":"4px"}},{"selector":"edge.filtered","style":{"opacity":"0"}},{"selector":"edge[group=\"coexp\"]","style":{"line-color":"#d0b7d5"}},{"selector":"edge[group=\"coloc\"]","style":{"line-color":"#a0b3dc"}},{"selector":"edge[group=\"gi\"]","style":{"line-color":"#90e190"}},{"selector":"edge[group=\"path\"]","style":{"line-color":"#9bd8de"}},{"selector":"edge[group=\"pi\"]","style":{"line-color":"#eaa2a2"}},{"selector":"edge[group=\"predict\"]","style":{"line-color":"#f6c384"}},{"selector":"edge[group=\"spd\"]","style":{"line-color":"#dad4a2"}},{"selector":"edge[group=\"spd_attr\"]","style":{"line-color":"#D0D0D0"}},{"selector":"edge[group=\"reg\"]","style":{"line-color":"#D0D0D0"}},{"selector":"edge[group=\"reg_attr\"]","style":{"line-color":"#D0D0D0"}},{"selector":"edge[group=\"user\"]","style":{"line-color":"#f0ec86"}}],

    elements: {"edges":[{"data":{"source":"default:steel_ingot","target":"screwdriver:screwdriver"}},{"data":{"source":"dye:white","target":"dye:pink"}},{"data":{"source":"dye:magenta","target":"dye:pink"}},{"data":{"source":"dye:red","target":"dye:pink"}},{"data":{"source":"dye:white","target":"dye:orange"}},{"data":{"source":"dye:orange","target":"dye:orange"}},{"data":{"source":"dye:brown","target":"dye:orange"}},{"data":{"source":"dye:white","target":"dye:yellow"}},{"data":{"source":"dye:yellow","target":"dye:yellow"}},{"data":{"source":"dye:white","target":"dye:green"}},{"data":{"source":"dye:green","target":"dye:green"}},{"data":{"source":"dye:dark_green","target":"dye:green"}},{"data":{"source":"dye:white","target":"dye:grey"}},{"data":{"source":"dye:cyan","target":"dye:grey"}},{"data":{"source":"dye:white","target":"dye:cyan"}},{"data":{"source":"dye:blue","target":"dye:cyan"}},{"data":{"source":"dye:white","target":"dye:violet"}},{"data":{"source":"dye:violet","target":"dye:violet"}},{"data":{"source":"dye:black","target":"dye:grey"}},{"data":{"source":"dye:dark_grey","target":"dye:grey"}},{"data":{"source":"dye:white","target":"dye:white"}},{"data":{"source":"dye:grey","target":"dye:white"}},{"data":{"source":"dye:dark_green","target":"dye:brown"}},{"data":{"source":"dye:magenta","target":"dye:brown"}},{"data":{"source":"dye:red","target":"dye:brown"}},{"data":{"source":"dye:orange","target":"dye:brown"}},{"data":{"source":"dye:brown","target":"dye:brown"}},{"data":{"source":"dye:yellow","target":"dye:green"}},{"data":{"source":"dye:dark_green","target":"dye:dark_green"}},{"data":{"source":"dye:dark_grey","target":"dye:brown"}},{"data":{"source":"dye:yellow","target":"dye:brown"}},{"data":{"source":"dye:dark_grey","target":"dye:dark_green"}},{"data":{"source":"dye:green","target":"dye:dark_green"}},{"data":{"source":"dye:dark_grey","target":"dye:blue"}},{"data":{"source":"dye:cyan","target":"dye:blue"}},{"data":{"source":"dye:blue","target":"dye:blue"}},{"data":{"source":"dye:dark_grey","target":"dye:violet"}},{"data":{"source":"dye:dark_grey","target":"dye:black"}},{"data":{"source":"dye:black","target":"dye:black"}},{"data":{"source":"dye:magenta","target":"dye:magenta"}},{"data":{"source":"dye:magenta","target":"dye:blue"}},{"data":{"source":"dye:cyan","target":"dye:brown"}},{"data":{"source":"dye:cyan","target":"dye:dark_green"}},{"data":{"source":"dye:orange","target":"dye:dark_green"}},{"data":{"source":"dye:cyan","target":"dye:dark_grey"}},{"data":{"source":"dye:brown","target":"dye:dark_grey"}},{"data":{"source":"dye:cyan","target":"dye:green"}},{"data":{"source":"dye:cyan","target":"dye:cyan"}},{"data":{"source":"dye:green","target":"dye:cyan"}},{"data":{"source":"dye:red","target":"dye:magenta"}},{"data":{"source":"dye:red","target":"dye:red"}},{"data":{"source":"dye:orange","target":"dye:red"}},{"data":{"source":"dye:magenta","target":"dye:red"}},{"data":{"source":"dye:red","target":"dye:orange"}},{"data":{"source":"dye:yellow","target":"dye:red"}},{"data":{"source":"dye:yellow","target":"dye:orange"}},{"data":{"source":"dye:orange","target":"dye:yellow"}},{"data":{"source":"dye:green","target":"dye:brown"}},{"data":{"source":"dye:green","target":"dye:yellow"}},{"data":{"source":"dye:red","target":"dye:yellow"}},{"data":{"source":"dye:brown","target":"dye:dark_green"}},{"data":{"source":"dye:grey","target":"dye:pink"}},{"data":{"source":"dye:grey","target":"dye:orange"}},{"data":{"source":"dye:grey","target":"dye:yellow"}},{"data":{"source":"dye:grey","target":"dye:green"}},{"data":{"source":"dye:grey","target":"dye:grey"}},{"data":{"source":"dye:grey","target":"dye:cyan"}},{"data":{"source":"dye:violet","target":"dye:pink"}},{"data":{"source":"dye:grey","target":"dye:dark_grey"}},{"data":{"source":"dye:black","target":"dye:dark_grey"}},{"data":{"source":"dye:violet","target":"dye:magenta"}},{"data":{"source":"dye:violet","target":"dye:red"}},{"data":{"source":"dye:violet","target":"dye:brown"}},{"data":{"source":"dye:violet","target":"dye:cyan"}},{"data":{"source":"dye:violet","target":"dye:blue"}},{"data":{"source":"dye:blue","target":"dye:violet"}},{"data":{"source":"dye:magenta","target":"dye:black"}},{"data":{"source":"dye:red","target":"dye:black"}},{"data":{"source":"dye:orange","target":"dye:black"}},{"data":{"source":"dye:brown","target":"dye:black"}},{"data":{"source":"dye:yellow","target":"dye:black"}},{"data":{"source":"dye:green","target":"dye:black"}},{"data":{"source":"dye:dark_green","target":"dye:black"}},{"data":{"source":"dye:cyan","target":"dye:black"}},{"data":{"source":"dye:blue","target":"dye:black"}},{"data":{"source":"dye:violet","target":"dye:black"}},{"data":{"source":"dye:magenta","target":"dye:violet"}},{"data":{"source":"dye:blue","target":"dye:magenta"}},{"data":{"source":"dye:blue","target":"dye:brown"}},{"data":{"source":"dye:blue","target":"dye:dark_green"}},{"data":{"source":"dye:yellow","target":"dye:dark_green"}},{"data":{"source":"dye:dark_green","target":"dye:cyan"}},{"data":{"source":"default:tree","target":"default:wood"}},{"data":{"source":"default:jungletree","target":"default:junglewood"}},{"data":{"source":"default:pine_tree","target":"default:pine_wood"}},{"data":{"source":"default:acacia_tree","target":"default:acacia_wood"}},{"data":{"source":"default:coal_lump","target":"default:torch"}},{"data":{"source":"default:steel_ingot","target":"default:pick_steel"}},{"data":{"source":"default:bronze_ingot","target":"default:pick_bronze"}},{"data":{"source":"default:mese_crystal","target":"default:pick_mese"}},{"data":{"source":"default:diamond","target":"default:pick_diamond"}},{"data":{"source":"default:steel_ingot","target":"default:shovel_steel"}},{"data":{"source":"default:bronze_ingot","target":"default:shovel_bronze"}},{"data":{"source":"default:mese_crystal","target":"default:shovel_mese"}},{"data":{"source":"default:diamond","target":"default:shovel_diamond"}},{"data":{"source":"default:steel_ingot","target":"default:axe_steel"}},{"data":{"source":"default:bronze_ingot","target":"default:axe_bronze"}},{"data":{"source":"default:mese_crystal","target":"default:axe_mese"}},{"data":{"source":"default:diamond","target":"default:axe_diamond"}},{"data":{"source":"default:steel_ingot","target":"default:sword_steel"}},{"data":{"source":"default:bronze_ingot","target":"default:sword_bronze"}},{"data":{"source":"default:mese_crystal","target":"default:sword_mese"}},{"data":{"source":"default:diamond","target":"default:sword_diamond"}},{"data":{"source":"default:steel_ingot","target":"default:rail"}},{"data":{"source":"default:steel_ingot","target":"default:chest_locked"}},{"data":{"source":"default:steel_ingot","target":"default:bronze_ingot"}},{"data":{"source":"default:copper_ingot","target":"default:bronze_ingot"}},{"data":{"source":"default:coal_lump","target":"default:coalblock"}},{"data":{"source":"default:coalblock","target":"default:coal_lump"}},{"data":{"source":"default:steel_ingot","target":"default:steelblock"}},{"data":{"source":"default:steelblock","target":"default:steel_ingot"}},{"data":{"source":"default:copper_ingot","target":"default:copperblock"}},{"data":{"source":"default:copperblock","target":"default:copper_ingot"}},{"data":{"source":"default:bronze_ingot","target":"default:bronzeblock"}},{"data":{"source":"default:bronzeblock","target":"default:bronze_ingot"}},{"data":{"source":"default:gold_ingot","target":"default:goldblock"}},{"data":{"source":"default:goldblock","target":"default:gold_ingot"}},{"data":{"source":"default:diamond","target":"default:diamondblock"}},{"data":{"source":"default:diamondblock","target":"default:diamond"}},{"data":{"source":"default:sandstone","target":"default:sand"}},{"data":{"source":"default:sandstone","target":"default:sandstonebrick"}},{"data":{"source":"default:clay_lump","target":"default:clay"}},{"data":{"source":"default:clay_brick","target":"default:brick"}},{"data":{"source":"default:brick","target":"default:clay_brick"}},{"data":{"source":"default:papyrus","target":"default:paper"}},{"data":{"source":"default:paper","target":"default:book"}},{"data":{"source":"default:book","target":"default:bookshelf"}},{"data":{"source":"default:mese_crystal","target":"default:mese"}},{"data":{"source":"default:mese","target":"default:mese_crystal"}},{"data":{"source":"default:mese_crystal","target":"default:mese_crystal_fragment"}},{"data":{"source":"default:mese_crystal","target":"default:meselamp"}},{"data":{"source":"default:glass","target":"default:meselamp"}},{"data":{"source":"default:obsidian","target":"default:obsidian_shard"}},{"data":{"source":"default:obsidian_shard","target":"default:obsidian"}},{"data":{"source":"default:obsidian","target":"default:obsidianbrick"}},{"data":{"source":"default:stone","target":"default:stonebrick"}},{"data":{"source":"default:desert_stone","target":"default:desert_stonebrick"}},{"data":{"source":"default:snow","target":"default:snowblock"}},{"data":{"source":"default:snowblock","target":"default:snow"}},{"data":{"source":"default:obsidian_shard","target":"default:obsidian_glass"}},{"data":{"source":"default:cobble","target":"default:stone"}},{"data":{"source":"default:mossycobble","target":"default:stone"}},{"data":{"source":"default:desert_cobble","target":"default:desert_stone"}},{"data":{"source":"default:iron_lump","target":"default:steel_ingot"}},{"data":{"source":"default:copper_lump","target":"default:copper_ingot"}},{"data":{"source":"default:gold_lump","target":"default:gold_ingot"}},{"data":{"source":"default:clay_lump","target":"default:clay_brick"}},{"data":{"source":"default:glass","target":"xpanes:pane"}},{"data":{"source":"default:steel_ingot","target":"xpanes:bar"}},{"data":{"source":"default:steel_ingot","target":"farming:hoe_steel"}},{"data":{"source":"default:bronze_ingot","target":"farming:hoe_bronze"}},{"data":{"source":"default:mese_crystal","target":"farming:hoe_mese"}},{"data":{"source":"default:diamond","target":"farming:hoe_diamond"}},{"data":{"source":"farming:wheat","target":"farming:flour"}},{"data":{"source":"farming:flour","target":"farming:bread"}},{"data":{"source":"farming:cotton","target":"wool:white"}},{"data":{"source":"farming:wheat","target":"farming:straw"}},{"data":{"source":"farming:straw","target":"farming:wheat"}},{"data":{"source":"default:wood","target":"stairs:stair_wood"}},{"data":{"source":"default:wood","target":"stairs:slab_wood"}},{"data":{"source":"default:junglewood","target":"stairs:stair_junglewood"}},{"data":{"source":"default:junglewood","target":"stairs:slab_junglewood"}},{"data":{"source":"default:pine_wood","target":"stairs:stair_pine_wood"}},{"data":{"source":"default:pine_wood","target":"stairs:slab_pine_wood"}},{"data":{"source":"default:acacia_wood","target":"stairs:stair_acacia_wood"}},{"data":{"source":"default:acacia_wood","target":"stairs:slab_acacia_wood"}},{"data":{"source":"default:stone","target":"stairs:stair_stone"}},{"data":{"source":"default:stone","target":"stairs:slab_stone"}},{"data":{"source":"default:cobble","target":"stairs:stair_cobble"}},{"data":{"source":"default:cobble","target":"stairs:slab_cobble"}},{"data":{"source":"default:stonebrick","target":"stairs:stair_stonebrick"}},{"data":{"source":"default:stonebrick","target":"stairs:slab_stonebrick"}},{"data":{"source":"default:desert_stone","target":"stairs:stair_desert_stone"}},{"data":{"source":"default:desert_stone","target":"stairs:slab_desert_stone"}},{"data":{"source":"default:desert_cobble","target":"stairs:stair_desert_cobble"}},{"data":{"source":"default:desert_cobble","target":"stairs:slab_desert_cobble"}},{"data":{"source":"default:desert_stonebrick","target":"stairs:stair_desert_stonebrick"}},{"data":{"source":"default:desert_stonebrick","target":"stairs:slab_desert_stonebrick"}},{"data":{"source":"default:sandstone","target":"stairs:stair_sandstone"}},{"data":{"source":"default:sandstone","target":"stairs:slab_sandstone"}},{"data":{"source":"default:sandstonebrick","target":"stairs:stair_sandstonebrick"}},{"data":{"source":"default:sandstonebrick","target":"stairs:slab_sandstonebrick"}},{"data":{"source":"default:obsidian","target":"stairs:stair_obsidian"}},{"data":{"source":"default:obsidian","target":"stairs:slab_obsidian"}},{"data":{"source":"default:obsidianbrick","target":"stairs:stair_obsidianbrick"}},{"data":{"source":"default:obsidianbrick","target":"stairs:slab_obsidianbrick"}},{"data":{"source":"default:brick","target":"stairs:stair_brick"}},{"data":{"source":"default:brick","target":"stairs:slab_brick"}},{"data":{"source":"farming:straw","target":"stairs:stair_straw"}},{"data":{"source":"farming:straw","target":"stairs:slab_straw"}},{"data":{"source":"default:steelblock","target":"stairs:stair_steelblock"}},{"data":{"source":"default:steelblock","target":"stairs:slab_steelblock"}},{"data":{"source":"default:copperblock","target":"stairs:stair_copperblock"}},{"data":{"source":"default:copperblock","target":"stairs:slab_copperblock"}},{"data":{"source":"default:bronzeblock","target":"stairs:stair_bronzeblock"}},{"data":{"source":"default:bronzeblock","target":"stairs:slab_bronzeblock"}},{"data":{"source":"default:goldblock","target":"stairs:stair_goldblock"}},{"data":{"source":"default:goldblock","target":"stairs:slab_goldblock"}},{"data":{"source":"wool:red","target":"beds:fancy_bed"}},{"data":{"source":"wool:white","target":"beds:fancy_bed"}},{"data":{"source":"wool:red","target":"beds:bed"}},{"data":{"source":"wool:white","target":"beds:bed"}},{"data":{"source":"default:glass","target":"vessels:glass_bottle"}},{"data":{"source":"default:glass","target":"vessels:drinking_glass"}},{"data":{"source":"default:steel_ingot","target":"vessels:steel_bottle"}},{"data":{"source":"vessels:glass_bottle","target":"vessels:glass_fragments"}},{"data":{"source":"vessels:drinking_glass","target":"vessels:glass_fragments"}},{"data":{"source":"vessels:glass_fragments","target":"default:glass"}},{"data":{"source":"vessels:steel_bottle","target":"default:steel_ingot"}},{"data":{"source":"default:coal_lump","target":"tnt:gunpowder"}},{"data":{"source":"default:gravel","target":"tnt:gunpowder"}},{"data":{"source":"tnt:gunpowder","target":"tnt:tnt"}},{"data":{"source":"default:steel_ingot","target":"doors:door_steel"}},{"data":{"source":"default:glass","target":"doors:door_glass"}},{"data":{"source":"default:obsidian_glass","target":"doors:door_obsidian_glass"}},{"data":{"source":"default:steel_ingot","target":"bucket:bucket_empty"}}],"nodes":[{"data":{"id":"screwdriver:screwdriver","name":"Screwdriver (left-click rotates face, right-click rotates axis)","weight":1.0}},{"data":{"id":"default:steel_ingot","name":"Steel Ingot","weight":17.0}},{"data":{"id":"dye:pink","name":"Pink dye","weight":5.0}},{"data":{"id":"dye:white","name":"White dye","weight":10.0}},{"data":{"id":"dye:magenta","name":"Magenta dye","weight":11.0}},{"data":{"id":"dye:red","name":"Red dye","weight":12.0}},{"data":{"id":"dye:orange","name":"Orange dye","weight":12.0}},{"data":{"id":"dye:brown","name":"Brown dye","weight":16.0}},{"data":{"id":"dye:yellow","name":"Yellow dye","weight":13.0}},{"data":{"id":"dye:green","name":"Green dye","weight":12.0}},{"data":{"id":"dye:dark_green","name":"Dark green dye","weight":13.0}},{"data":{"id":"dye:grey","name":"Grey dye","weight":13.0}},{"data":{"id":"dye:cyan","name":"Cyan dye","weight":15.0}},{"data":{"id":"dye:blue","name":"Blue dye","weight":12.0}},{"data":{"id":"dye:violet","name":"Violet dye","weight":13.0}},{"data":{"id":"dye:black","name":"Black dye","weight":15.0}},{"data":{"id":"dye:dark_grey","name":"Dark grey dye","weight":10.0}},{"data":{"id":"default:wood","name":"Wooden Planks","weight":3.0}},{"data":{"id":"default:tree","name":"Tree","weight":1.0}},{"data":{"id":"default:junglewood","name":"Junglewood Planks","weight":3.0}},{"data":{"id":"default:jungletree","name":"Jungle Tree","weight":1.0}},{"data":{"id":"default:pine_wood","name":"Pine Wood Planks","weight":3.0}},{"data":{"id":"default:pine_tree","name":"Pine Tree","weight":1.0}},{"data":{"id":"default:acacia_wood","name":"Acacia Wood Planks","weight":3.0}},{"data":{"id":"default:acacia_tree","name":"Acacia Tree","weight":1.0}},{"data":{"id":"default:torch","name":"Torch","weight":1.0}},{"data":{"id":"default:coal_lump","name":"Coal Lump","weight":4.0}},{"data":{"id":"default:pick_steel","name":"Steel Pickaxe","weight":1.0}},{"data":{"id":"default:pick_bronze","name":"Bronze Pickaxe","weight":1.0}},{"data":{"id":"default:bronze_ingot","name":"Bronze Ingot","weight":9.0}},{"data":{"id":"default:pick_mese","name":"Mese Pickaxe","weight":1.0}},{"data":{"id":"default:mese_crystal","name":"Mese Crystal","weight":9.0}},{"data":{"id":"default:pick_diamond","name":"Diamond Pickaxe","weight":1.0}},{"data":{"id":"default:diamond","name":"Diamond","weight":7.0}},{"data":{"id":"default:shovel_steel","name":"Steel Shovel","weight":1.0}},{"data":{"id":"default:shovel_bronze","name":"Bronze Shovel","weight":1.0}},{"data":{"id":"default:shovel_mese","name":"Mese Shovel","weight":1.0}},{"data":{"id":"default:shovel_diamond","name":"Diamond Shovel","weight":1.0}},{"data":{"id":"default:axe_steel","name":"Steel Axe","weight":1.0}},{"data":{"id":"default:axe_bronze","name":"Bronze Axe","weight":1.0}},{"data":{"id":"default:axe_mese","name":"Mese Axe","weight":1.0}},{"data":{"id":"default:axe_diamond","name":"Diamond Axe","weight":1.0}},{"data":{"id":"default:sword_steel","name":"Steel Sword","weight":1.0}},{"data":{"id":"default:sword_bronze","name":"Bronze Sword","weight":1.0}},{"data":{"id":"default:sword_mese","name":"Mese Sword","weight":1.0}},{"data":{"id":"default:sword_diamond","name":"Diamond Sword","weight":1.0}},{"data":{"id":"default:rail","name":"Rail","weight":1.0}},{"data":{"id":"default:chest_locked","name":"Locked Chest","weight":1.0}},{"data":{"id":"default:copper_ingot","name":"Copper Ingot","weight":4.0}},{"data":{"id":"default:coalblock","name":"Coal Block","weight":2.0}},{"data":{"id":"default:steelblock","name":"Steel Block","weight":4.0}},{"data":{"id":"default:copperblock","name":"Copper Block","weight":4.0}},{"data":{"id":"default:bronzeblock","name":"Bronze Block","weight":4.0}},{"data":{"id":"default:goldblock","name":"Gold Block","weight":4.0}},{"data":{"id":"default:gold_ingot","name":"Gold Ingot","weight":3.0}},{"data":{"id":"default:diamondblock","name":"Diamond Block","weight":2.0}},{"data":{"id":"default:sand","name":"Sand","weight":1.0}},{"data":{"id":"default:sandstone","name":"Sandstone","weight":4.0}},{"data":{"id":"default:sandstonebrick","name":"Sandstone Brick","weight":3.0}},{"data":{"id":"default:clay","name":"Clay","weight":1.0}},{"data":{"id":"default:clay_lump","name":"Clay Lump","weight":2.0}},{"data":{"id":"default:brick","name":"Brick Block","weight":4.0}},{"data":{"id":"default:clay_brick","name":"Clay Brick","weight":3.0}},{"data":{"id":"default:paper","name":"Paper","weight":2.0}},{"data":{"id":"default:papyrus","name":"Papyrus","weight":1.0}},{"data":{"id":"default:book","name":"Book","weight":2.0}},{"data":{"id":"default:bookshelf","name":"Bookshelf","weight":1.0}},{"data":{"id":"default:mese","name":"Mese Block","weight":2.0}},{"data":{"id":"default:mese_crystal_fragment","name":"Mese Crystal Fragment","weight":1.0}},{"data":{"id":"default:meselamp","name":"Mese Lamp","weight":2.0}},{"data":{"id":"default:glass","name":"Glass","weight":6.0}},{"data":{"id":"default:obsidian_shard","name":"Obsidian Shard","weight":3.0}},{"data":{"id":"default:obsidian","name":"Obsidian","weight":5.0}},{"data":{"id":"default:obsidianbrick","name":"Obsidian Brick","weight":3.0}},{"data":{"id":"default:stonebrick","name":"Stone Brick","weight":3.0}},{"data":{"id":"default:stone","name":"Stone","weight":5.0}},{"data":{"id":"default:desert_stonebrick","name":"Desert Stone Brick","weight":3.0}},{"data":{"id":"default:desert_stone","name":"Desert Stone","weight":4.0}},{"data":{"id":"default:snowblock","name":"Snow Block","weight":2.0}},{"data":{"id":"default:snow","name":"Snow","weight":2.0}},{"data":{"id":"default:obsidian_glass","name":"Obsidian Glass","weight":2.0}},{"data":{"id":"default:cobble","name":"Cobblestone","weight":3.0}},{"data":{"id":"default:mossycobble","name":"Mossy Cobblestone","weight":1.0}},{"data":{"id":"default:desert_cobble","name":"Desert Cobblestone","weight":3.0}},{"data":{"id":"default:iron_lump","name":"Iron Lump","weight":1.0}},{"data":{"id":"default:copper_lump","name":"Copper Lump","weight":1.0}},{"data":{"id":"default:gold_lump","name":"Gold Lump","weight":1.0}},{"data":{"id":"xpanes:pane","name":"Glass Pane","weight":1.0}},{"data":{"id":"xpanes:bar","name":"Iron bar","weight":1.0}},{"data":{"id":"farming:hoe_steel","name":"Steel Hoe","weight":1.0}},{"data":{"id":"farming:hoe_bronze","name":"Bronze Hoe","weight":1.0}},{"data":{"id":"farming:hoe_mese","name":"Mese Hoe","weight":1.0}},{"data":{"id":"farming:hoe_diamond","name":"Diamond Hoe","weight":1.0}},{"data":{"id":"farming:flour","name":"Flour","weight":2.0}},{"data":{"id":"farming:wheat","name":"Wheat","weight":3.0}},{"data":{"id":"farming:bread","name":"Bread","weight":1.0}},{"data":{"id":"wool:white","name":"White Wool","weight":3.0}},{"data":{"id":"farming:cotton","name":"Cotton","weight":1.0}},{"data":{"id":"farming:straw","name":"Straw","weight":4.0}},{"data":{"id":"stairs:stair_wood","name":"Wooden Stair","weight":1.0}},{"data":{"id":"stairs:slab_wood","name":"Wooden Slab","weight":1.0}},{"data":{"id":"stairs:stair_junglewood","name":"Junglewood Stair","weight":1.0}},{"data":{"id":"stairs:slab_junglewood","name":"Junglewood Slab","weight":1.0}},{"data":{"id":"stairs:stair_pine_wood","name":"Pine Wood Stair","weight":1.0}},{"data":{"id":"stairs:slab_pine_wood","name":"Pine Wood Slab","weight":1.0}},{"data":{"id":"stairs:stair_acacia_wood","name":"Acacia Wood Stair","weight":1.0}},{"data":{"id":"stairs:slab_acacia_wood","name":"Acacia Wood Slab","weight":1.0}},{"data":{"id":"stairs:stair_stone","name":"Stone Stair","weight":1.0}},{"data":{"id":"stairs:slab_stone","name":"Stone Slab","weight":1.0}},{"data":{"id":"stairs:stair_cobble","name":"Cobblestone Stair","weight":1.0}},{"data":{"id":"stairs:slab_cobble","name":"Cobblestone Slab","weight":1.0}},{"data":{"id":"stairs:stair_stonebrick","name":"Stone Brick Stair","weight":1.0}},{"data":{"id":"stairs:slab_stonebrick","name":"Stone Brick Slab","weight":1.0}},{"data":{"id":"stairs:stair_desert_stone","name":"Desertstone Stair","weight":1.0}},{"data":{"id":"stairs:slab_desert_stone","name":"Desertstone Slab","weight":1.0}},{"data":{"id":"stairs:stair_desert_cobble","name":"Desert Cobblestone Stair","weight":1.0}},{"data":{"id":"stairs:slab_desert_cobble","name":"Desert Cobblestone Slab","weight":1.0}},{"data":{"id":"stairs:stair_desert_stonebrick","name":"Desert Stone Brick Stair","weight":1.0}},{"data":{"id":"stairs:slab_desert_stonebrick","name":"Desert Stone Brick Slab","weight":1.0}},{"data":{"id":"stairs:stair_sandstone","name":"Sandstone Stair","weight":1.0}},{"data":{"id":"stairs:slab_sandstone","name":"Sandstone Slab","weight":1.0}},{"data":{"id":"stairs:stair_sandstonebrick","name":"Sandstone Brick Stair","weight":1.0}},{"data":{"id":"stairs:slab_sandstonebrick","name":"Sandstone Brick Slab","weight":1.0}},{"data":{"id":"stairs:stair_obsidian","name":"Obsidian Stair","weight":1.0}},{"data":{"id":"stairs:slab_obsidian","name":"Obsidian Slab","weight":1.0}},{"data":{"id":"stairs:stair_obsidianbrick","name":"Obsidian Brick Stair","weight":1.0}},{"data":{"id":"stairs:slab_obsidianbrick","name":"Obsidian Brick Slab","weight":1.0}},{"data":{"id":"stairs:stair_brick","name":"Brick Stair","weight":1.0}},{"data":{"id":"stairs:slab_brick","name":"Brick Slab","weight":1.0}},{"data":{"id":"stairs:stair_straw","name":"Straw Stair","weight":1.0}},{"data":{"id":"stairs:slab_straw","name":"Straw Slab","weight":1.0}},{"data":{"id":"stairs:stair_steelblock","name":"Steel Block Stair","weight":1.0}},{"data":{"id":"stairs:slab_steelblock","name":"Steel Block Slab","weight":1.0}},{"data":{"id":"stairs:stair_copperblock","name":"Copper Block Stair","weight":1.0}},{"data":{"id":"stairs:slab_copperblock","name":"Copper Block Slab","weight":1.0}},{"data":{"id":"stairs:stair_bronzeblock","name":"Bronze Block Stair","weight":1.0}},{"data":{"id":"stairs:slab_bronzeblock","name":"Bronze Block Slab","weight":1.0}},{"data":{"id":"stairs:stair_goldblock","name":"Gold Block Stair","weight":1.0}},{"data":{"id":"stairs:slab_goldblock","name":"Gold Block Slab","weight":1.0}},{"data":{"id":"beds:fancy_bed","name":"Fancy Bed","weight":2.0}},{"data":{"id":"wool:red","name":"Red Wool","weight":2.0}},{"data":{"id":"beds:bed","name":"Simple Bed","weight":2.0}},{"data":{"id":"vessels:glass_bottle","name":"Glass Bottle (empty)","weight":2.0}},{"data":{"id":"vessels:drinking_glass","name":"Drinking Glass (empty)","weight":2.0}},{"data":{"id":"vessels:steel_bottle","name":"Heavy Steel Bottle (empty)","weight":2.0}},{"data":{"id":"vessels:glass_fragments","name":"Pile of Glass Fragments","weight":3.0}},{"data":{"id":"tnt:gunpowder","name":"Gun Powder","weight":3.0}},{"data":{"id":"default:gravel","name":"Gravel","weight":1.0}},{"data":{"id":"tnt:tnt","name":"TNT","weight":1.0}},{"data":{"id":"doors:door_steel","name":"Steel Door","weight":1.0}},{"data":{"id":"doors:door_glass","name":"Glass Door","weight":1.0}},{"data":{"id":"doors:door_obsidian_glass","name":"Obsidian Glass Door","weight":1.0}},{"data":{"id":"bucket:bucket_empty","name":"Empty Bucket","weight":1.0}}]}


  });

  var params = {
    name: 'cola',
    nodeSpacing: 5,
    edgeLengthVal: 45,
    animate: true,
    randomize: false,
    maxSimulationTime: 1500
  };
  var layout = makeLayout();
  var running = false;

  cy.on('layoutstart', function(){
    running = true;
  }).on('layoutstop', function(){
    running = false;
  });

  layout.run();

  var $config = $('#config');
  var $btnParam = $('<div class="param"></div>');
  $config.append( $btnParam );

  var sliders = [
    {
      label: 'Edge length',
      param: 'edgeLengthVal',
      min: 1,
      max: 200
    },

    {
      label: 'Node spacing',
      param: 'nodeSpacing',
      min: 1,
      max: 50
    }
  ];

  var buttons = [
    {
      label: '<i class="fa fa-random"></i>',
      layoutOpts: {
        randomize: true,
        flow: null
      }
    },

    {
      label: '<i class="fa fa-long-arrow-down"></i>',
      layoutOpts: {
        flow: { axis: 'y', minSeparation: 30 }
      }
    }
  ];

  sliders.forEach( makeSlider );

  buttons.forEach( makeButton );

  function makeLayout( opts ){
    params.randomize = false;
    params.edgeLength = function(e){ return params.edgeLengthVal / e.data('weight'); };

    for( var i in opts ){
      params[i] = opts[i];
    }

    return cy.makeLayout( params );
  }

  function makeSlider( opts ){
    var $input = $('<input></input>');
    var $param = $('<div class="param"></div>');

    $param.append('<span class="label label-default">'+ opts.label +'</span>');
    $param.append( $input );

    $config.append( $param );

    var p = $input.slider({
      min: opts.min,
      max: opts.max,
      value: params[ opts.param ]
    }).on('slide', _.throttle( function(){
      params[ opts.param ] = p.getValue();

      layout.stop();
      layout = makeLayout();
      layout.run();
    }, 16 ) ).data('slider');
  }

  function makeButton( opts ){
    var $button = $('<button class="btn btn-default">'+ opts.label +'</button>');

    $btnParam.append( $button );

    $button.on('click', function(){
      layout.stop();

      if( opts.fn ){ opts.fn(); }

      layout = makeLayout( opts.layoutOpts );
      layout.run();
    });
  }

  cy.nodes().forEach(function(n){
    var g = n.data('id');
    var r = n.data('weight');

    n.qtip({
      content: g + "<br />Links: " + r,
      position: {
        my: 'top center',
        at: 'bottom center'
      },
      style: {
        classes: 'qtip-bootstrap',
        tip: {
          width: 16,
          height: 8
        }
      }
    });
  });

  $('#config-toggle').on('click', function(){
    $('body').toggleClass('config-closed');

    cy.resize();
  });

}); // on dom ready

$(function() {
  FastClick.attach( document.body );
});
